<!DOCTYPE html>
<html>
  <head>
    <meta charset="utf-8" />
    <title>首页三</title>
    <meta name="renderer" content="webkit" />
    <meta http-equiv="X-UA-Compatible" content="IE=edge,chrome=1" />
    <meta
      name="viewport"
      content="width=device-width, initial-scale=1, maximum-scale=1"
    />
    <link
      rel="stylesheet"
      href="../lib/layui-v2.6.3/css/layui.css"
      media="all"
    />
    <link
      rel="stylesheet"
      href="../lib/font-awesome-4.7.0/css/font-awesome.min.css"
      media="all"
    />
    <link rel="stylesheet" href="../css/public.css" media="all" />
    <style>
      /* .top-panel {
            border: 1px solid #eceff9;
            border-radius: 5px;
            text-align: center;
        }
        .top-panel > .layui-card-body{
            height: 60px;
        }
        .top-panel-number{
            line-height:60px;
            font-size: 30px;
            border-right:1px solid #eceff9;
        }
        .top-panel-tips{
            line-height:30px;
            font-size: 12px
        } */
    </style>
  </head>
  <body>
    <div class="layuimini-container">
      <div class="layuimini-main">
        <div class="layui-form-item">
          <label class="layui-form-label">短输入框</label>
          <div class="layui-input-inline">
            <input
              type="text"
              id="test-value"
              lay-verify="required"
              placeholder="请输入"
              autocomplete="off"
              class="layui-input"
            />
          </div>
        </div>
        <button
          type="button"
          id="test-button"
          class="layui-btn layui-btn-primary"
        >
          测试按钮
        </button>
        <button
          type="button"
          id="close-button"
          class="layui-btn layui-btn-primary"
        >
          关闭按钮
        </button>
      </div>
    </div>
    <script src="../lib/layui-v2.6.3/layui.js" charset="utf-8"></script>
    <script src="../js/lay-config.js?v=1.0.4" charset="utf-8"></script>
    <script>
      layui.use(["layer", "echarts", "miniTab", "element"], function () {
        var $ = layui.$,
          miniTab = layui.miniTab,
          element = layui.element;

        $("body").on("click", "#test-button", function () {
          console.log("submit");
          let value = $("#test-value").val();
          let href = `page/tab_res.html?value=${value}`;
          // refresh
          let current = $(".layui-tab-item.layui-show", parent.document).find("iframe");
          let src = current.attr("src");
          current.attr("src", src);


          miniTab.openNewTabByIframe({
            href: href,
            title: "按钮示例",
          });
        });

        $("body").on("click", "#close-button", function () {
          console.log("close");
          miniTab.deleteCurrentByIframe();
        });
        
      });
    </script>
  </body>
</html>
